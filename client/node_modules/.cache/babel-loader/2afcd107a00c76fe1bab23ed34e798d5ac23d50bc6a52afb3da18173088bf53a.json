{"ast":null,"code":"import _regeneratorRuntime from\"D:/Andrew/Documents/GitHub/SpotifyApp/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"D:/Andrew/Documents/GitHub/SpotifyApp/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"D:/Andrew/Documents/GitHub/SpotifyApp/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState,useEffect}from'react';import{catchErrors}from'../utils';import{getCurrentUserProfile,getCurrentUserPlaylists,getTopArtists,getTopTracks}from'../Spotify';import{StyledHeader}from'../styles';import{SectionWrapper,ArtistsGrid,TrackList,PlaylistsGrid,Loader}from'../components';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var Profile=function Profile(){var _useState=useState(null),_useState2=_slicedToArray(_useState,2),profile=_useState2[0],setProfile=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),playlists=_useState4[0],setPlaylists=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),topArtists=_useState6[0],setTopArtists=_useState6[1];var _useState7=useState(null),_useState8=_slicedToArray(_useState7,2),topTracks=_useState8[0],setTopTracks=_useState8[1];useEffect(function(){var fetchData=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var userProfile,userPlaylists,userTopArtists,userTopTracks;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return getCurrentUserProfile();case 2:userProfile=_context.sent;setProfile(userProfile.data);_context.next=6;return getCurrentUserPlaylists();case 6:userPlaylists=_context.sent;setPlaylists(userPlaylists.data);_context.next=10;return getTopArtists();case 10:userTopArtists=_context.sent;setTopArtists(userTopArtists.data);_context.next=14;return getTopTracks();case 14:userTopTracks=_context.sent;setTopTracks(userTopTracks.data);case 16:case\"end\":return _context.stop();}},_callee);}));return function fetchData(){return _ref.apply(this,arguments);};}();catchErrors(fetchData());},[]);return/*#__PURE__*/_jsxs(_Fragment,{children:[profile&&/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(StyledHeader,{type:\"user\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"header__inner\",children:[profile.images.length&&profile.images[0].url&&/*#__PURE__*/_jsx(\"img\",{className:\"header__img\",src:profile.images[0].url,alt:\"Avatar\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"header__overline\",children:\"Profile\"}),/*#__PURE__*/_jsx(\"h1\",{className:\"header__name\",children:profile.display_name}),/*#__PURE__*/_jsxs(\"p\",{className:\"header__meta\",children:[playlists&&/*#__PURE__*/_jsxs(\"span\",{children:[playlists.total,\" Playlist\",playlists.total!==1?'s':'']}),/*#__PURE__*/_jsxs(\"span\",{children:[profile.followers.total,\" Follower\",profile.followers.total!==1?'s':'']})]})]})]})})}),topArtists&&topTracks&&playlists?/*#__PURE__*/_jsxs(\"main\",{children:[/*#__PURE__*/_jsx(SectionWrapper,{title:\"Top artists this month\",seeAllLink:\"/top-artists\",children:/*#__PURE__*/_jsx(ArtistsGrid,{artists:topArtists.items.slice(0,10)})}),/*#__PURE__*/_jsx(SectionWrapper,{title:\"Top tracks this month\",seeAllLink:\"/top-tracks\",children:/*#__PURE__*/_jsx(TrackList,{tracks:topTracks.items.slice(0,10)})}),/*#__PURE__*/_jsx(SectionWrapper,{title:\"Playlists\",seeAllLink:\"/playlists\",children:/*#__PURE__*/_jsx(PlaylistsGrid,{playlists:playlists.items.slice(0,10)})})]}):/*#__PURE__*/_jsx(Loader,{})]});};export default Profile;","map":{"version":3,"names":["useState","useEffect","catchErrors","getCurrentUserProfile","getCurrentUserPlaylists","getTopArtists","getTopTracks","StyledHeader","SectionWrapper","ArtistsGrid","TrackList","PlaylistsGrid","Loader","Profile","profile","setProfile","playlists","setPlaylists","topArtists","setTopArtists","topTracks","setTopTracks","fetchData","userProfile","data","userPlaylists","userTopArtists","userTopTracks","images","length","url","display_name","total","followers","items","slice"],"sources":["D:/Andrew/Documents/GitHub/SpotifyApp/client/src/pages/Profile.js"],"sourcesContent":["import { useState, useEffect } from 'react';\r\nimport { catchErrors } from '../utils';\r\nimport { getCurrentUserProfile, getCurrentUserPlaylists, getTopArtists, getTopTracks } from '../Spotify';\r\nimport { StyledHeader } from '../styles';\r\nimport { SectionWrapper, ArtistsGrid, TrackList, PlaylistsGrid, Loader } from '../components'\r\n\r\nconst Profile = () => {\r\n  const [profile, setProfile] = useState(null);\r\n  const [playlists, setPlaylists] = useState(null);\r\n  const [topArtists, setTopArtists] = useState(null);\r\n  const [topTracks, setTopTracks] = useState(null);\r\n\r\n\r\n  useEffect(() => {\r\n    const fetchData = async () => {\r\n      const userProfile = await getCurrentUserProfile();\r\n      setProfile(userProfile.data);\r\n\r\n      const userPlaylists = await getCurrentUserPlaylists();\r\n      setPlaylists(userPlaylists.data);\r\n\r\n      const userTopArtists = await getTopArtists();\r\n      setTopArtists(userTopArtists.data);\r\n      \r\n      const userTopTracks = await getTopTracks();\r\n      setTopTracks(userTopTracks.data);\r\n    };\r\n\r\n    catchErrors(fetchData());\r\n  }, []);\r\n\r\n  return (\r\n    <>\r\n      {profile && (\r\n        <>\r\n          <StyledHeader type=\"user\">\r\n            <div className=\"header__inner\">\r\n              {profile.images.length && profile.images[0].url && (\r\n                <img className=\"header__img\" src={profile.images[0].url} alt=\"Avatar\"/>\r\n              )}\r\n              <div>\r\n                <div className=\"header__overline\">Profile</div>\r\n                <h1 className=\"header__name\">{profile.display_name}</h1>\r\n                <p className=\"header__meta\">\r\n                  {playlists && (\r\n                    <span>{playlists.total} Playlist{playlists.total !== 1 ? 's' : ''}</span>\r\n                  )}\r\n                  <span>\r\n                    {profile.followers.total} Follower{profile.followers.total !== 1 ? 's' : ''}\r\n                  </span>\r\n                </p>\r\n              </div>\r\n            </div>\r\n          </StyledHeader>\r\n        </>\r\n      )}\r\n    \r\n    {topArtists && topTracks && playlists ? (\r\n        <main>\r\n          <SectionWrapper title=\"Top artists this month\" seeAllLink=\"/top-artists\">\r\n            <ArtistsGrid artists={topArtists.items.slice(0, 10)} />\r\n          </SectionWrapper>\r\n\r\n          <SectionWrapper title=\"Top tracks this month\" seeAllLink=\"/top-tracks\">\r\n            <TrackList tracks={topTracks.items.slice(0, 10)} />\r\n          </SectionWrapper>\r\n\r\n          <SectionWrapper title=\"Playlists\" seeAllLink=\"/playlists\">\r\n            <PlaylistsGrid playlists={playlists.items.slice(0, 10)} />\r\n          </SectionWrapper>\r\n        </main>\r\n      ) : (\r\n        <Loader />\r\n      )}\r\n    </>\r\n  )\r\n};\r\n\r\nexport default Profile;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}